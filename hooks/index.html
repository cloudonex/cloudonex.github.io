
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">

    <title>iBilling Hooks</title>

    <!-- Styles -->
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/css/custom.css" rel="stylesheet">

    <!-- Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Raleway:100,300,400,500%7CLato:300,400' rel='stylesheet' type='text/css'>

    <!-- Favicons -->

    <link rel="icon" href="assets/img/favicon.ico">
</head>

<body data-spy="scroll" data-target=".sidebar" data-offset="200">

<header class="site-header sticky navbar-transparent">

    <!-- Top navbar & branding -->
    <nav class="navbar navbar-default">
        <div class="container">

            <!-- Toggle buttons and brand -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar" aria-expanded="true" aria-controls="navbar">
                    <span class="glyphicon glyphicon-option-vertical"></span>
                </button>

                <button type="button" class="navbar-toggle for-sidebar" data-toggle="offcanvas">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a class="navbar-brand" href="index.html">iBilling Hooks </a>
            </div>
            <!-- END Toggle buttons and brand -->

            <!-- Top navbar -->
            <div id="navbar" class="navbar-collapse collapse" aria-expanded="true" role="banner">
                <ul class="nav navbar-nav navbar-right">
                    <li class="active"><a href="index.html">Documentation</a></li>
                    <li class="hero"><a href="https://codecanyon.net/item/ibilling-crm-accounting-and-billing-software/11021678">Purchase</a></li>
                </ul>
            </div>
            <!-- END Top navbar -->

        </div>
    </nav>
    <!-- END Top navbar & branding -->

    <!-- Banner -->
    <div class="banner auto-size" style="background-color: #0088cc">
        <div class="container text-white">
            <h1><strong>iBilling</strong> customization</h1>
            <h5>Add your own code to iBilling.</h5>
        </div>
    </div>
    <!-- END Banner -->

</header>



<main class="container">
    <div class="row">

        <!-- Sidebar -->
        <aside class="col-sm-3 sidebar">

            <ul class="nav sidenav dropable sticky">
                <li><a href="#what_is_hook">What is a Hook?</a></li>
                <li><a href="#get-started">Get Started</a></li>
                <li>
                    <a href="#real_life_example">Real Life Example</a>
                    <ul>
                        <li><a href="#send_sms_notification">Sending SMS Notification</a></li>
                        <li><a href="#send_additional_email">Sending Additional Email</a></li>
                        <li><a href="#creating_custom_menu">Creating Custom Menu</a></li>
                        <li><a href="#registering_users">Registering users in another system</a></li>
                        <!--<li><a href="#modify_features">Modifying Default Features</a></li>-->

                    </ul>
                </li>
                <!--<li><a href="#hookpoints">Hook Points</a></li>-->
                <li><a href="#support">Getting Support</a></li>


            </ul>

        </aside>
        <!-- END Sidebar -->


        <!-- Main content -->
        <article class="col-sm-9 main-content" role="main">

            <p class="lead">

                iBilling Supports Hooks from V 4.2. You can add various features to your iBilling without editing the core files.

            </p>


            <section>
                <h2 id="what_is_hook">What is hook?</h2>
                <p>Action Hooks allow you to add your own code to iBilling. The code will run when specific events or actions occur inside the system. iBilling has over 100 different hook points. These you can tie custom code into.</p>




            </section>

            <section>
                <h2 id="get-started">Get started with Hooks</h2>
                <p>You will find hooks directory inside sysfrm. To know where the hooks directory located, click "sysfrm" directory below.</p>


                <div class="file-tree">

                    <ul>
                        <li class="is-folder open">
                            iBilling
                            <ul>
                                <li class="is-folder">
                                    sysfrm
                                    <ul>
                                        <li class="is-folder">autoload</li>
                                        <li class="is-folder">controllers</li>
                                        <li class="is-folder">dev</li>
                                        <li class="is-folder open">hooks
                                            <ul>
                                                <li class="is-file">action.php</li>
                                                <li class="is-file">index.html</li>
                                            </ul>
                                        </li>
                                        <li class="is-folder">install</li>
                                        <li class="is-folder">lan</li>
                                        <li class="is-folder">lib</li>
                                        <li class="is-folder">plugins</li>
                                        <li class="is-folder">uploads</li>
                                        <li class="is-folder">util</li>
                                        <li class="is-file">boot.php</li>
                                        <li class="is-file">config.php</li>
                                        <li class="is-file">functions.php</li>
                                        <li class="is-file">index.html</li>
                                        <li class="is-file">orm.php</li>
                                        <li class="is-file">plugged.php</li>
                                    </ul>
                                </li>
                                <li class="is-folder">
                                    ui
                                    <ul>
                                        <li class="is-folder">
                                            theme
                                            <ul>
                                                <li class="is-file">...</li>
                                            </ul>
                                        </li>
                                        <li class="is-file">index.html</li>
                                    </ul>
                                </li>

                                <li class="is-folder">
                                    vendor
                                    <ul>
                                        <li class="is-file">...</li>
                                    </ul>
                                </li>

                                <li class="is-file">index.php</li>


                            </ul>
                        </li>

                    </ul>

                </div>

                <p>Create a file inside hooks directory with any name. (e.g.- action.php)</p>
                <p>Now add the following codes inside action.php</p>

                <div class="code-window">






<pre class="line-numbers"><code class="language-php">Event::bind('routing_started',function(){

    global $_L;

    $_L['CRM'] = 'Customers';
    $_L['Add Contact'] = 'Add Customer';
    $_L['List Contacts'] = 'List Customers';


    });
</code></pre>

                    <div class="code-preview">
                        <p><img src="assets/img/hook_change_language_line.png"> </p>
                    </div>

                </div>





<p>The possibilities with hooks are many, Here is some example when you might use hooks-</p>

<ul>
    <li>Registering users in another system when they signup via iBilling.</li>
    <li>Sending various notifications.</li>
    <li>Keeping contacts in sync with third party applications.</li>
    <li>Modifying features.</li>
    <li>Making Custom action when invoice is paid.</li>
</ul>

            </section>

            <section>
                <h2 id="real_life_example">Real Life Example</h2>
                <p>Here is the some usage example</p>


            </section>

            <section>
                <h2 id="send_sms_notification">Sending SMS Notification</h2>

                <p>Here is an example to send SMS notification to client when invoice marked as paid.</p>

                <div class="code-window">






<pre class="line-numbers"><code class="language-php">Event::bind('invoices/markpaid/',function($invoice){

    $nexmo_api_key = ''; # Nexmo API Key
    $nexmo_api_secret = ''; # Nexmo API Secret
    $from = 'iBilling'; # Message from


    // Find the client

    $client = ORM::for_table('crm_accounts')->find_one($invoice->userid);

    if($client->phone == ''){
    return false;
    }

    $to = $client->phone;

    $text = 'Hi '.$client->account.'! Thanks for your payment. Invoice- '.$invoice->id.' Paid Successfully.';


    $url = 'https://rest.nexmo.com/sms/json?' . http_build_query(
    [
    'api_key' =>  $nexmo_api_key,
    'api_secret' => $nexmo_api_secret,
    'to' => $to,
    'from' => $from,
    'text' => $text
    ]
    );

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $response = curl_exec($ch);

    return $response;

    });
</code></pre>

                    <div class="code-preview">
                        <p><img src="assets/img/sms_notification.jpg"> </p>
                    </div>

                </div>


            </section>


            <section>
                <h2 id="send_additional_email">Sending Additional Email</h2>

                <p>Send a notification to admin that a new client has been registered.</p>

                <div class="code-window">






<pre class="line-numbers"><code class="language-php">Event::bind('client_registered',function($data){


    $message = 'New Client Registered. Client: '.$data['account'].' Email: '.$data['email'];

    Ib_Email::sendEmail('admin@example.com','Client Signup',$message);


    });
</code></pre>



                </div>


            </section>


            <section>
                <h2 id="creating_custom_menu">Creating Custom Menu</h2>

                <p>Dynamically create menu inside iBilling.</p>

                <div class="code-window">






<pre class="line-numbers"><code class="language-php">add_menu_admin('About','#','about','fa fa-paper-plane',2,array(
    array(
    'name' => 'Documentation',
    'link' => 'http://www.ibilling.io/documentation/'
    ),
    array(
    'name' => 'Purchase',
    'link' => 'https://codecanyon.net/item/ibilling-crm-accounting-and-billing-software/11021678',
    'target' => '_blank'
    )
    ));
</code></pre>

                    <div class="code-preview">
                        <p><img src="assets/img/hook_custom_menu.png"> </p>
                    </div>

                </div>


            </section>

            <section>
                <h2 id="registering_users">Registering users in another system</h2>

                <p>After clinet signup, call api to create user to your another system.</p>

                <div class="code-window">






<pre class="line-numbers"><code class="language-php">Event::bind('client_registered',function($data){

    $name = $data['account'];
    $email = $data['email'];

    // Your logic to create account through api


    });
</code></pre>



                </div>


            </section>

            <!--<section>-->
                <!--<h2 id="modify_features">Modifying Default Features</h2>-->
                <!--<p>Here is the some usage example</p>-->


            <!--</section>-->




            <!--<section>-->
                <!--<h2 id="hookpoints">Hook Points</h2>-->
                <!--<p>Here is the some usage example</p>-->


            <!--</section>-->










            <section>
                <h2 id="support">Getting Support</h2>
                <p>For any support, contact me using my profile page - <a href="https://codecanyon.net/user/sadiasharmin" target="_blank">https://codecanyon.net/user/sadiasharmin</a> </p>

            </section>

        </article>
        <!-- END Main content -->
    </div>
</main>


<!-- Footer -->
<footer class="site-footer">
    <div class="container">
        <a id="scroll-up" href="#"><i class="fa fa-angle-up"></i></a>

        <div class="row">
            <div class="col-md-6 col-sm-6">
                <p>Copyright &copy; 2016 <a href="http://www.cloudonex.com" target="_blank">CloudOnex</a> . All rights reserved.</p>
            </div>
            <div class="col-md-6 col-sm-6">
                <ul class="footer-menu">
                    <li><a href="https://codecanyon.net/item/ibilling-crm-accounting-and-billing-software/11021678" target="_blank">View iBilling on CodeCanyon</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- END Footer -->

<!-- Scripts -->
<script src="assets/js/script.js"></script>

</body>
</html>
